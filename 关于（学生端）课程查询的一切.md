# 最首先是需求

- 我们本周的要实现的需求只局限于以下几个
  - 通过课表查询
  - 通过**直接输入**课程名称查询
  - 查询的内容（目前，4.13日，后续新增以新的日期标注）：
    - 课程的上课时间
    - 课程的上课地点
    - 课程的课程群
    - 其他的查询信息，搭出框架的情况下无非是新增几个字段和方法还有类。
  - **查询活动暂时不属于本周的需求，我们放到下一个模块**

# 首先是必须的类

## 周期表类

- 包括两种分类
  - 班级的周期表
  - 学生自己的周期表（独有的那些课）

- 可能需要实现的方法：
  - 增加课程
  - 删除课程
  - 查询课程我们不放这里，我们放在学生端查询的那里（我们不直接查这个表，查某个学生那里的表）。

- 大概就是一个七个节点的链表。每个节点代表一周七天的某一天。
- 这个周期表保存的是这一整个班的同学都共有的课程。
- 每个节点里面存储的有：
  - 这个节点代表的是周几
  - 这一天的课程。
- 周期表的具体构造的图示：
  - 七个节点，每个节点代表一天
  - 每个节点内有有一个长度为9的链表，这个链表代表当天的9节课
    - 不管有没有课，都要有九个节点。
    - 这是为了方便后续合并两个课表。
    - 如果某一节课没有课。这个节点的课程类字段为空。

  - 序号为节点的序号，也是一天的课的序号。


```java
班级公共周期表：
周一：1 2 3 4 5 6 7 8 9
周二：1 2 3 4 5 6 7 8 9
以此类推
学生的个人独有课的课表也是这样的结构
周一：1 2 3 4 5 6 7 8 9
周二：1 2 3 4 5 6 7 8 9
假设
    我的课表的第1 2 3 4 节是公共课，第6789节是公选课
    那么公共周期表的第1 2 3 4节为非空，6 7 8 9节是空
    个人课表的第6 7 8 9节是非空，第1 2 3 4节为空
    现在要对两个课表进行合并以得到完整的课表：
    合并周一的课表时：
    同时对周一的两条链表（一条公共，一条个人）进行遍历，对于序号相同的节点，选择非空的那一个
    比如对于周一的第1 2 3 4节，选择公共课表。
```

## 非周期表类

- 可能需要实现的方法
  - 对过期活动的删除
  - 对新活动的添加

- 这一个类的每一个节点都是一个集体活动。
- 对于个人活动我们保存在属于个人的活动表中。
- 集体活动我们不考虑存在周期性的集体活动。



## 学生类

- 学生类会扩展用户类。用户类只有用户名和密码以及一个布尔值表示是否是学生。
- 新增的字段：
  - 所属班级，这个在序列化学生信息到硬盘的时候，需要根据班级决定把它放哪个文件夹。
  - 

## 管理员类

- 由JYQ实现
- 在实现后续其他模块的时候应该会根据需要来扩展

## 课程类

- PPT上的需求：学生可以输入课程名称，或者通过课程表查询课程的
  - 上课时间、上课地点
  - 课程资料
  - 当前进度
  - 已交作业、待交作业
  - 课程群
  - 考试时间和考试地点等信息
- ~~我们假定所有的课都只bbdsz2dsz2有一个上课时间段：~~`4.15日更新，决定删除这个假设`
  - ~~这里的上课时间指的是从几点到几点，不会出现同一名字的课程既在上午开设，又在另一天的下午开设。~~
  - ~~举个例子就是我们的计网一直是早八的两节课，不会出现在某一天的下22222午最后两节课。~~
  - ~~课处于周几可以变化，但是不管是周几，都是固定在那一天的某个时间22222222222段。~~
  - ~~比如计网可以在周一和周三，但是它固定在早八的两节课。~~
- ~~`4.15日新的假设`，我们决定接受同一门课既可能在上午开设，也可能在2下午开设的假设，考虑到某些4学分的课确实如此。~~
- 我们不区分课程是否是公选课，所有课的地位都是同等的。通过将某个课程加入到某个同学的个人独有课程表来体现。
  - 毕竟某一个同学的公选课可能是另外一个班的周期课。
- `4.13日初版文档定下的字段`，实例字段（以后实现其他模块的时候可能需要根据需要来扩展，暂时定下这些）
  - 课程名称
  - 上课地点
  - ~~开始时间（几点到几点）~~`4.15删除，并对分段做了一些修改`
  - ~~结束时间（几点到几点）~~
  - `下列内容是4.15新增的字段`
  - 上午的开始时间
  - 上午的结束时间
  - 下午的开始时间
  - 下午的结束时间
  - 课程群
    - 关于课程群的一些说明：
    - 我们只有一个`String GroupInformation`。
    - 用户输入“群1：xxxxx，群2：xxxxx....”，直接原封不动地保存到这个字段。
    - 查询的时候原封不动的输出。
    - 即使用户输入“下北泽114514”，也直接原封不动地输出。
  - 周几我们不放这里，靠周期表来体现
- 后续会增加的字段：后续再来考虑
  - 课程资料
  - 考试
  - 当前进度（我们还没有确定如何衡量当前进度）



## 活动类

- 我们假定不存在周期性的活动。
- 稍后的个人活动类和集体活动类会与这个类有继承关系。

- 实例字段：
  - 活动名称
  - 开始时间（时和分）
  - 结束时间（时和分）
  - 日期（年月日）

## 个人活动类

- 继承了活动类
- 新增的字段有
  - 活动的归属人，这个可以在调用方法的时候查询用户的用户名来赋值。
  - 活动的归属人的归属班级。
  - 可能会在后续模块中根据需要扩展，目前不是课程查询模块的需求，趁着灵感在就直接写在这里了。

## 集体活动类

- 继承了活动类
- 新增的字段有：
  - 活动所归属的班级
  - 也不是目前需求，先写这里了。

# 文件夹结构

- 根据需要修改了一下文件夹的结构
  - 课程总仓：放置整个学校的所有课程的总仓
    - ~~灵感来的时候突然想到的，我也不晓得有什么用~~。
    - 现在知道了，管理员在增加课程，修改课程信息的时候，就对总仓里的信息进行修改。
    - 然后学生登录之后，会把学生所在班级的周期表对照课程总仓里的课程进行更新。
    - `4.17新增`，新增了用户总仓，具体的原因如下。
      - 用户登录的时候我们只要求用户输入了用户名和密码，但是没有要求用户输入班级。
      - 如果用户是学生，并且我们把学生的用户信息文件放入所属班级的文件夹，我们在不知道班级的情况下，没办法访问那个文件
      - 也就没办法将用户输入的用户名和密码以及硬盘是存储的用户名和密码进行对比。
      - 因此我新增了用户总仓，把所有的用户的信息文件都放入了这里，班级文件夹下的用户信息文件暂留，以后可能会用到。（我想到了一个用途了，还没经过讨论就不放这里了）
  
  

```java
   --UserFiles
       	--课程总仓，放置所有课程的地方，每个课程是一个序列化的对象，用课程的名称来命名。
        --用户总仓。所有的用户的用户信息都放置在这里
    	--八班
       		周期表（班级的所有同学共有的课程）
       		非周期表（班级只生效一次的集体活动）
    		--八班的所有同学的用户信息序列化文件
    		--小明
       			个人课外活动表
       			个人相对本班独有的课程，比如公选课的表
       			--
    			--小明的作业，资料的压缩文件
    		--小亮
    			--小亮的作业，资料的压缩文件
    	--九班
    		--九班的对象的序列化文件
```



# 查询流程

- 首先通过`Model_Main.UserInfo`引用得到用户的用户名和班级。
- 有关如何打印课表：
  - 

- 按课表查询：

  - 不管三七二十一直接把这个学生的课表打印出来。
  - 然后询问要查哪一门课
  - 然后把这一门课的所有信息打印出来

- 按课程名称查询：

  - 如果输入的课程名称无误，则没什么，直接输出对应课程的信息。

  - 有误则可能需要模糊查询？

    - 使用正则表达式REXEXP。
    - 可能会有多个匹配项，让用户选择一个进行重新输入。
    - 然后转入课程名称无误的情况。

    

